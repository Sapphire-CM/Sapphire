<table class='exercise-evaluations-table'>
  <thead>
    <tr>
      <th>&nbsp;</th>
      <th>&nbsp;</th>
      <% data.student_groups.each do |student_group| %>
        <th class='<%= @exercise_evaluations_state_classes[student_group.id] %>'>
          <%= @exercise_evaluations_student_group_titles[student_group.id] %>
        </th>
      <% end %>
    </tr>
    <tr>
      <td><b>Submission</b></td>
      <td></td>
      <% data.student_groups.each do |student_group| %>
        <td class='text-center'>
          <%= exercise_evaluations_create_submission_button(data, student_group) %>
        </td>
      <% end %>
    </tr>
  </thead>

  <tbody>
    <% data.rating_groups.each do |rating_group| %>
      <tr class='rating-group-separator'>
        <th><%= rating_group.title %></th>
        <th class='minimum-width text-right'><%= rating_group.points %></th>
        <% data.student_groups.each do |student_group| %>
          <td class='text-center
            <%= @exercise_evaluations_state_classes[student_group.id] %>
            <%= exercise_evaluations_evaluation_group_results_id(student_group, rating_group) %>'>
            <b><%= exercise_evaluations_evaluation_group_result(data, student_group, rating_group) %></b>
          </td>
        <% end %>
      </tr>

      <% rating_group.ratings.each_with_index do |rating, rating_index| %>
        <tr>
          <td class='rating-title'><%= shorten rating.title, 20 %></td>
          <td class='text-right rating-points'><%= rating_points_description rating %></td>
          <% data.student_groups.each do |student_group| %>
            <td class='text-center
              <%= @exercise_evaluations_state_classes[student_group.id] %>
              submission-evaluation-<%= student_group.id %>-<%= rating.id %>
              submission-evaluation-<%= student_group.id %>'
              data-student-group='<%= student_group.id %>'>
              <%= @forms[rating.id][student_group.id] || '-' %>
            </td>
          <% end %>
        </tr>
      <% end %>
    <% end %>

    <tr>
      <th>Result</th>
      <th></th>
      <% data.student_groups.each do |student_group| %>
        <td class='text-center <%= exercise_evaluations_result_id(student_group) %>'>
          <b><%= exercise_evaluations_submission_result(data, student_group) %></b>
        </td>
      <% end %>
    </tr>

  </tbody>
</table>
