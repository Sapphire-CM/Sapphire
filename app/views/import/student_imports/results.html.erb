<% title "Import students into #{course_term_title(current_course, current_term)}", "Results" %>

<div class="row">
  <div class="large-12 columns">
    <h2>Statistics</h2>

    <table>
      <thead>
        <th>Property</th>
        <th>Status</th>
      </thead>
      <tbody>
        <tr>
          <td>Success</td>
          <td><%= @student_import.import_result[:success] %></td>
        </tr>
        <tr>
          <td>Created student accounts</td>
          <td><%= @student_import.import_result[:imported_students] %></td>
        </tr>
        <tr>
          <td>Created tutorial groups</td>
          <td><%= @student_import.import_result[:imported_tutorial_groups] %></td>
        </tr>
        <tr>
          <td>Created student groups</td>
          <td><%= @student_import.import_result[:imported_student_groups] %></td>
        </tr>
        <tr>
          <td>Created student registrations</td>
          <td><%= @student_import.import_result[:imported_student_registrations] %></td>
        </tr>
      </tbody>
    </table>
  </div>
</div>

<div class="row">
  <div class="large-12 columns">
    <% if @student_import.import_result[:problems].any? %>
      <h2>Problems</h2>

      <div class="panel">
        <% @student_import.import_result[:problems].each do |problem| %>
          <table>
            <thead>
              <th>Group</th>
              <th>Forename</th>
              <th>Surname</th>
              <th>Email</th>
              <th>Matriculum number</th>
              <th>Registered at</th>
              <th>Comment</th>
            </thead>
            <tbody>
              <tr>
                <td><%= problem[:entry][:group] %></td>
                <td><%= problem[:entry][:forename] %></td>
                <td><%= problem[:entry][:surname] %></td>
                <td><%= problem[:entry][:email] %></td>
                <td><%= problem[:entry][:matriculum_number] %></td>
                <td><%= problem[:entry][:registered_at] %></td>
                <td><%= problem[:entry][:comment] %></td>
              </tr>
            </tbody>
          </table>

          <ul class="disc">
            <% for item in problem[:problem] %>
              <li><%= item %></li>
            <% end %>
          </ul>
        <% end %>
      </div>
    <% else %>
      <h2>Success - no problems happened.</h2>
    <% end %>

  </div>
</div>


