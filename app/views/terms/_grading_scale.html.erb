<div id='grading_scale'>
  <table class='large-centered grid-center'>
    <thead>
      <th>Grade</th>
      <th colspan=3 class='text-center'>Points</th>
      <th>Students</th>
      <th>Percent</th>
    </thead>
    <tbody>
      <% @term.grading_scale.reverse.each_with_index do |item, index| %>
        <tr>
          <th class='minimum-width text-center'><%= item[1] %></th>
          <td class='text-right'>
            <% if index+1 == @term.grading_scale.length %>
              <%= item[0] %>
            <% else %>
              <%= simple_form_for :grading_scale, url: term_update_grading_scale_path(@term), remote: true do |f| %>
                <%= f.number_field item[1].to_s,
                  value: item[0],
                  min: 1,
                  max: @term.points > 0 ? (@term.points-1) : 9999,
                  class: 'margin-none' %>
              <% end %>
            <% end %>
          </td>
          <td class='minimum-width'>-</td>
          <td class='minimum-width text-right'>
            <% if index-1 >= 0 %>
              <%= @term.grading_scale.reverse[index-1][0] - 1 %></td>
            <% else %>
              <%= @term.points %>
            <% end %>
          </td>
          <td class='minimum-width text-right'>
            <%= @term.grade_distribution[item[1]] %>
          </td>
          <td class='minimum-width text-right'>
            <%= student_grade_percentage @term, item[1] %>
          </td>
        </tr>
      <% end %>
      <tr><td colspan='6'><hr></td></tr>
      <tr>
        <td class='minimum-width text-center'>0</td>
        <td colspan='3'>&nbsp;</td>
        <td class='minimum-width text-right'><%= @term.grade_distribution['0'] %></td>
        <td class='minimum-width text-right'><%= student_grade_percentage @term, '0' %></td>
      </tr>
    </tbody>
  </table>
</div>
